C51 COMPILER V9.54   SC95F_GPIO                                                            04/19/2023 15:54:52 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE SC95F_GPIO
OBJECT MODULE PLACED IN ..\Output\sc95f_gpio.obj
COMPILER INVOKED BY: D:\Keil5\C51\BIN\C51.EXE ..\FWLib\SC95F_Lib\src\sc95f_gpio.c LARGE OBJECTADVANCED OPTIMIZE(8,SIZE) 
                    -BROWSE INCDIR(..\FWLib\SC95F_Lib\inc;..\User;..\Bank1;..\Bank2;..\Bank3) DEFINE(SC95F8x3x) DEBUG PRINT(..\List\sc95f_gpi
                    -o.lst) OBJECT(..\Output\sc95f_gpio.obj)

line level    source

   1          //************************************************************
   2          //  Copyright (c) 
   3          //      文件名称:               sc95f_gpio.c
   4          //      作者:
   5          //      模块功能:                       GPIO固件库函数头文件
   6          //  最后更正日期:       2022年7月22日
   7          //      版本:                           V1.10006
   8          //  说明:                                       该文件仅适用于SC95F系列芯片
   9          //*************************************************************
  10          
  11          #include "sc95f_gpio.h"
  12          
  13          /**************************************************
  14          *函数名称:void GPIO_DeInit(void)
  15          *函数功能:GPIO相关寄存器复位至缺省值
  16          *入口参数:void
  17          *出口参数:void
  18          **************************************************/
  19          void GPIO_DeInit(void)
  20          {
  21   1      #if defined(SC95F8x1x) || defined(SC95F7x1x) || defined(SC95FWxx) || defined(SC95F8x3x) || defined(SC95F7x
             -3x)\
  22   1                      || defined (SC95F8x6x) || defined (SC95F7x6x)  || defined (SC95F8x1xB) || defined (SC95F7x1xB) || define
             -d (SC95R751)\
  23   1                      || defined (SC95F7610B)
  24   1        P0CON = 0x00;
  25   1        P1CON = 0x00;
  26   1        P2CON = 0x00;
  27   1        P3CON = 0x00;
  28   1        P4CON = 0x00;
  29   1        P5CON = 0x00;
  30   1        P0PH = 0x00;
  31   1        P1PH = 0x00;
  32   1        P2PH = 0x00;
  33   1        P3PH = 0x00;
  34   1        P4PH = 0x00;
  35   1        P5PH = 0x00;
  36   1        P0 = P1 = P2 = P3 = P4 = P5 = 0;
  37   1      #endif
  38   1      #if defined(SC95F7619B)
                P0CON = 0x00;
                P1CON = 0x00;
                P2CON = 0x00;
                P4CON = 0x00;
                P5CON = 0x00;
                P0PH = 0x00;
                P1PH = 0x00;
                P2PH = 0x00;
                P4PH = 0x00;
                P5PH = 0x00;
                P0 = P1 = P2 = P4 = P5 = 0;
              #endif
  51   1              
C51 COMPILER V9.54   SC95F_GPIO                                                            04/19/2023 15:54:52 PAGE 2   

  52   1      #if defined(SC95F8x2x) || defined(SC95F7x2x)
                P0CON = 0x00;
                P1CON = 0x00;
                P2CON = 0x00;
                P5CON = 0x00;
                P0PH = 0x00;
                P1PH = 0x00;
                P2PH = 0x00;
                P5PH = 0x00;
                P0 = P1 = P2 = P5 = 0;
              #endif
  63   1      }
  64          
  65          /**************************************************
  66          *函数名称:void GPIO_Init(GPIO_TypeDef GPIOx, GPIO_Pin_TypeDef PortPins, GPIO_Mode_TypeDef GPIO_Mode)
  67          *函数功能:GPIO口配置初始化
  68          *入口参数:
  69          GPIO_TypeDef:GPIOx:待操作的GPIO口
  70          GPIO_Pin_TypeDef:PortPins:GPIO管脚Pxy（uint8_t作为入参，方便进行位或操作）
  71          GPIO_Mode_TypeDef:GPIO_Mode:GPIO口模式（高阻输入、上拉输入、推挽输出）
  72          *出口参数:void
  73          **************************************************/
  74          void GPIO_Init(GPIO_TypeDef GPIOx, uint8_t PortPins, GPIO_Mode_TypeDef GPIO_Mode)
  75          {
  76   1              /* 选择需要操作的GPIO */
  77   1        switch(GPIOx)
  78   1        {
  79   2                      case GPIO0:
  80   2                      {
  81   3                              switch(GPIO_Mode)
  82   3                              {
  83   4                                      /* 配置IO为高阻输入模式 */
  84   4                                      case GPIO_MODE_IN_HI:                   
  85   4                                              P0CON &= ~PortPins;
  86   4                                              P0PH &= ~PortPins;
  87   4                                      break;
  88   4                                      /* 配置IO为上拉输入模式 */
  89   4                                      case GPIO_MODE_IN_PU:
  90   4                                              P0CON &= ~PortPins;
  91   4                                              P0PH |= PortPins;
  92   4                                      break;
  93   4                                      /* 配置IO为推挽输出模式 */
  94   4                                      case GPIO_MODE_OUT_PP:
  95   4                                              P0CON |= PortPins;
  96   4                                      break;
  97   4                                      default: 
  98   4                                      break;
  99   4                              }
 100   3                      }
 101   2                      break;
 102   2                      case GPIO1:
 103   2                      {
 104   3                              switch(GPIO_Mode)
 105   3                              {
 106   4                                      /* 配置IO为高阻输入模式 */
 107   4                                      case GPIO_MODE_IN_HI:
 108   4                                              P1CON &= ~PortPins;
 109   4                                              P1PH &= ~PortPins;
 110   4                                      break;
 111   4                                      /* 配置IO为上拉输入模式 */
 112   4                                      case GPIO_MODE_IN_PU:
 113   4                                              P1CON &= ~PortPins;
C51 COMPILER V9.54   SC95F_GPIO                                                            04/19/2023 15:54:52 PAGE 3   

 114   4                                              P1PH |= PortPins;
 115   4                                      break;
 116   4                                      /* 配置IO为推挽输出模式 */
 117   4                                      case GPIO_MODE_OUT_PP:
 118   4                                              P1CON |= PortPins;
 119   4                                      break;
 120   4                                      default: 
 121   4                                      break;
 122   4                              }
 123   3                      }
 124   2                      break;
 125   2                      case GPIO2:
 126   2                      {
 127   3                              switch(GPIO_Mode)
 128   3                              {
 129   4                                      /* 配置IO为高阻输入模式 */
 130   4                                      case GPIO_MODE_IN_HI:
 131   4                                              P2CON &= ~PortPins;
 132   4                                              P2PH &= ~PortPins;
 133   4                                      break;
 134   4                                      /* 配置IO为上拉输入模式 */
 135   4                                      case GPIO_MODE_IN_PU:
 136   4                                              P2CON &= ~PortPins;
 137   4                                              P2PH |= PortPins;
 138   4                                      break;
 139   4                                      /* 配置IO为推挽输出模式 */
 140   4                                      case GPIO_MODE_OUT_PP:
 141   4                                              P2CON |= PortPins;
 142   4                                      break;
 143   4                                      default: 
 144   4                                      break;
 145   4                              }
 146   3                      }
 147   2                      break;
 148   2      #if defined(SC95F8x1x) || defined(SC95F7x1x) || defined(SC95FWxx) || defined(SC95F8x3x) || defined(SC95F7x
             -3x) || defined (SC95F8x6x) || defined (SC95F7x6x)\
 149   2                      || defined (SC95F8x1xB) || defined (SC95F7x1xB)
 150   2                      #if !defined(SC95F7619B)
 151   2                      case GPIO3:
 152   2                      {
 153   3                              switch(GPIO_Mode)
 154   3                              {
 155   4                                      /* 配置IO为高阻输入模式 */
 156   4                                      case GPIO_MODE_IN_HI:
 157   4                                              P3CON &= ~PortPins;
 158   4                                              P3PH &= ~PortPins;
 159   4                                      break;
 160   4                                      /* 配置IO为上拉输入模式 */
 161   4                                      case GPIO_MODE_IN_PU:
 162   4                                              P3CON &= ~PortPins;
 163   4                                              P3PH |= PortPins;
 164   4                                      break;
 165   4                                      /* 配置IO为推挽输出模式 */
 166   4                                      case GPIO_MODE_OUT_PP:
 167   4                                              P3CON |= PortPins;
 168   4                                      break;
 169   4                                      default: 
 170   4                                      break;
 171   4                              }
 172   3                      }
 173   2                      break;
 174   2                      #endif
C51 COMPILER V9.54   SC95F_GPIO                                                            04/19/2023 15:54:52 PAGE 4   

 175   2                      case GPIO4:
 176   2                      {
 177   3                              switch(GPIO_Mode)
 178   3                              {
 179   4                                      /* 配置IO为高阻输入模式 */
 180   4                                      case GPIO_MODE_IN_HI:
 181   4                                              P4CON &= ~PortPins;
 182   4                                              P4PH &= ~PortPins;
 183   4                                      break;
 184   4                                      /* 配置IO为上拉输入模式 */
 185   4                                      case GPIO_MODE_IN_PU:
 186   4                                              P4CON &= ~PortPins;
 187   4                                              P4PH |= PortPins;
 188   4                                      break;
 189   4                                      /* 配置IO为推挽输出模式 */
 190   4                                      case GPIO_MODE_OUT_PP:
 191   4                                              P4CON |= PortPins;
 192   4                                      break;
 193   4                                      default: 
 194   4                                      break;
 195   4                              }
 196   3                      }
 197   2                      break;
 198   2      #endif
 199   2                      case GPIO5:
 200   2                      {
 201   3                              switch(GPIO_Mode)
 202   3                              {
 203   4                                      /* 配置IO为高阻输入模式 */
 204   4                                      case GPIO_MODE_IN_HI:
 205   4                                              P5CON &= ~PortPins;
 206   4                                              P5PH &= ~PortPins;
 207   4                                      break;
 208   4                                      /* 配置IO为上拉输入模式 */
 209   4                                      case GPIO_MODE_IN_PU:
 210   4                                              P5CON &= ~PortPins;
 211   4                                              P5PH |= PortPins;
 212   4                                      break;
 213   4                                      /* 配置IO为推挽输出模式 */
 214   4                                      case GPIO_MODE_OUT_PP:
 215   4                                              P5CON |= PortPins;
 216   4                                      break;
 217   4                                      default: 
 218   4                                      break;
 219   4                              }
 220   3                      }
 221   2                      break;
 222   2                      default: 
 223   2                      break;
 224   2        }
 225   1      }
 226          
 227          /**************************************************
 228          *函数名称:void GPIO_Write(GPIO_TypeDef GPIOx, uint8_t PortVal)
 229          *函数功能:GPIO口赋值
 230          *入口参数:
 231          GPIO_TypeDef:GPIOx:待操作的GPIO口
 232          uint8_t:PortVal:GPIO口的值
 233          *出口参数:void
 234          **************************************************/
 235          void GPIO_Write(GPIO_TypeDef GPIOx, uint8_t PortVal)
 236          {
C51 COMPILER V9.54   SC95F_GPIO                                                            04/19/2023 15:54:52 PAGE 5   

 237   1              /* 选择需要操作的GPIO */
 238   1              switch(GPIOx)
 239   1              {
 240   2                      case GPIO0:
 241   2                              P0 = PortVal;
 242   2                      break;
 243   2                      case GPIO1:
 244   2                              P1 = PortVal;
 245   2                      break;
 246   2                      case GPIO2:
 247   2                              P2 = PortVal;
 248   2                      break;
 249   2      #if defined(SC95F8x1x) || defined(SC95F7x1x) || defined(SC95FWxx) || defined(SC95F8x3x) || defined(SC95F7x
             -3x) || defined (SC95F8x6x) || defined (SC95F7x6x)\
 250   2                      || defined (SC95F8x1xB) || defined (SC95F7x1xB)
 251   2                      #if !defined(SC95F7619B)
 252   2                      case GPIO3:
 253   2                              P3 = PortVal;
 254   2                      break;
 255   2                      #endif
 256   2                      case GPIO4:
 257   2                              P4 = PortVal;
 258   2                      break;
 259   2      #endif
 260   2                      case GPIO5:
 261   2                              P5 = PortVal;
 262   2                      break;
 263   2                      default: 
 264   2                      break;
 265   2              }
 266   1      }
 267          
 268          /**************************************************
 269          *函数名称:void GPIO_WriteHigh(GPIO_TypeDef GPIOx, GPIO_Pin_TypeDef PortPins)
 270          *函数功能:GPIO口管脚Pxy置位
 271          *入口参数:
 272          GPIO_TypeDef:GPIOx:待操作的GPIO口
 273          GPIO_Pin_TypeDef:PortPins:选择GPIO口管脚Pxy（uint8_t作为入参，方便进行位或操作）
 274          *出口参数:void
 275          **************************************************/
 276          void GPIO_WriteHigh(GPIO_TypeDef GPIOx, uint8_t PortPins)
 277          {
 278   1              /* 选择需要操作的GPIO */
 279   1                      switch(GPIOx)
 280   1              {
 281   2                      case GPIO0:
 282   2                              P0 |= PortPins;
 283   2                      break;
 284   2                      case GPIO1:
 285   2                              P1 |= PortPins;
 286   2                      break;
 287   2                      case GPIO2:
 288   2                              P2 |= PortPins;
 289   2                      break;
 290   2      #if defined(SC95F8x1x) || defined(SC95F7x1x) || defined(SC95FWxx) || defined(SC95F8x3x) || defined(SC95F7x
             -3x) || defined (SC95F8x6x) || defined (SC95F7x6x)\
 291   2                      || defined (SC95F8x1xB) || defined (SC95F7x1xB)
 292   2                      #if !defined(SC95F7619B)
 293   2                      case GPIO3:
 294   2                              P3 |= PortPins;
 295   2                      break;
 296   2                      #endif
C51 COMPILER V9.54   SC95F_GPIO                                                            04/19/2023 15:54:52 PAGE 6   

 297   2                      case GPIO4:
 298   2                              P4 |= PortPins;
 299   2                      break;
 300   2      #endif
 301   2                      case GPIO5:
 302   2                              P5 |= PortPins;
 303   2                      break;
 304   2                      default: 
 305   2                      break;
 306   2              }
 307   1      }
 308          
 309          /**************************************************
 310          *函数名称:void GPIO_WriteLow(GPIO_TypeDef GPIOx, GPIO_Pin_TypeDef PortPins)
 311          *函数功能:GPIO口管脚Pxy复位
 312          *入口参数:
 313          GPIO_TypeDef:GPIOx:待操作的GPIO口
 314          GPIO_Pin_TypeDef:PortPins:选择GPIO口管脚Pxy（uint8_t作为入参，方便进行位或操作）
 315          *出口参数:void
 316          **************************************************/
 317          void GPIO_WriteLow(GPIO_TypeDef GPIOx, uint8_t PortPins)
 318          {
 319   1              /* 选择需要操作的GPIO */
 320   1                      switch(GPIOx)
 321   1              {
 322   2                      case GPIO0:
 323   2                              P0 &= ~PortPins;
 324   2                      break;
 325   2                      case GPIO1:
 326   2                              P1 &= ~PortPins;
 327   2                      break;
 328   2                      case GPIO2:
 329   2                              P2 &= ~PortPins;
 330   2                      break;
 331   2      #if defined(SC95F8x1x) || defined(SC95F7x1x) || defined(SC95FWxx) || defined(SC95F8x3x) || defined(SC95F7x
             -3x) || defined (SC95F8x6x) || defined (SC95F7x6x)\
 332   2                      || defined (SC95F8x1xB) || defined (SC95F7x1xB)
 333   2                      #if !defined(SC95F7619B)
 334   2                      case GPIO3:
 335   2                              P3 &= ~PortPins;
 336   2                      break;
 337   2                      #endif
 338   2                      case GPIO4:
 339   2                              P4 &= ~PortPins;
 340   2                      break;
 341   2      #endif
 342   2                      case GPIO5:
 343   2                              P5 &= ~PortPins;
 344   2                      break;
 345   2                      default: 
 346   2                      break;
 347   2              }
 348   1      }
 349          
 350          /**************************************************
 351          *函数名称:uint8_t GPIO_ReadPort(GPIO_TypeDef GPIOx)
 352          *函数功能:读GPIO口Px的值
 353          *入口参数:
 354          GPIO_TypeDef:GPIOx:待操作的GPIO口
 355          *出口参数:
 356          uint8_t:返回Px的值
 357          **************************************************/
C51 COMPILER V9.54   SC95F_GPIO                                                            04/19/2023 15:54:52 PAGE 7   

 358          uint8_t GPIO_ReadPort(GPIO_TypeDef GPIOx)
 359          {
 360   1              /* 选择需要操作的GPIO */
 361   1              switch(GPIOx)
 362   1              {
 363   2                      case GPIO0:
 364   2                              return P0;
 365   2                      case GPIO1:
 366   2                              return P1;
 367   2                      case GPIO2:
 368   2                              return P2;
 369   2      #if defined(SC95F8x1x) || defined(SC95F7x1x) || defined(SC95FWxx) || defined(SC95F8x3x) || defined(SC95F7x
             -3x) || defined (SC95F8x6x) || defined (SC95F7x6x)\
 370   2                      || defined (SC95F8x1xB) || defined (SC95F7x1xB)
 371   2                      #if !defined(SC95F7619B)
 372   2                      case GPIO3:
 373   2                              return P3;
 374   2                      #endif
 375   2                      case GPIO4:
 376   2                              return P4;
 377   2      #endif
 378   2                      case GPIO5:
 379   2                              return P5;
 380   2                      default: 
 381   2                              return 0;
 382   2              }
 383   1      }
 384          
 385          /**************************************************
 386          *函数名称:BitStatus GPIO_ReadPin(GPIO_TypeDef GPIOx, uint8_t PortPins)
 387          *函数功能:读GPIO口管脚Pxy的值
 388          *入口参数:
 389          GPIO_TypeDef:GPIOx:待操作的GPIO口
 390          GPIO_Pin_TypeDef:PortPins:选择GPIO口管脚Pxy（uint8_t作为入参，方便进行位或操作）
 391          *出口参数:
 392          BitStatus:返回Pxy的值
 393          **************************************************/
 394          BitStatus GPIO_ReadPin(GPIO_TypeDef GPIOx, uint8_t PortPins)
 395          {
 396   1              /* 选择需要操作的GPIO */
 397   1              switch(GPIOx)
 398   1              {
 399   2                      case GPIO0:
 400   2                              return (P0 & PortPins);
 401   2                      case GPIO1:
 402   2                              return (P1 & PortPins);
 403   2                      case GPIO2:
 404   2                              return (P2 & PortPins);
 405   2      #if defined(SC95F8x1x) || defined(SC95F7x1x) || defined(SC95FWxx) || defined(SC95F8x3x) || defined(SC95F7x
             -3x) || defined (SC95F8x6x) || defined (SC95F7x6x)\
 406   2                      || defined (SC95F8x1xB) || defined (SC95F7x1xB)
 407   2                      #if !defined(SC95F7619B)
 408   2                      case GPIO3:
 409   2                              return (P3 & PortPins);
 410   2                      #endif
 411   2                      case GPIO4:
 412   2                              return (P4 & PortPins);
 413   2      #endif
 414   2                      case GPIO5:
 415   2                              return (P5 & PortPins);
 416   2                      default: 
 417   2                              return 0;
C51 COMPILER V9.54   SC95F_GPIO                                                            04/19/2023 15:54:52 PAGE 8   

 418   2              }
 419   1      }
 420          
 421          /**************************************************
 422          *函数名称:void GPIO_IOH_Config(GPIO_TypeDef GPIOx, uint8_t PortPins,GPIO_IOH_Grade_TypeDef GPIO_IOH_Grade)
 423          *函数功能:设置GPIO口管脚IOH输出能力
 424          *入口参数:
 425          GPIO_TypeDef:GPIOx:待操作的GPIO口
 426          GPIO_Pin_TypeDef:PortPins:选择GPIO口管脚Pxy
 427          GPIO_IOH_Grade_TypeDef:GPIO_IOH_Grade:选择IOH的输出等级
 428          *出口参数:void
 429          **************************************************/
 430          void GPIO_IOH_Config(GPIO_TypeDef GPIOx, GPIO_Pin_TypeDef PortPins, GPIO_IOH_Grade_TypeDef GPIO_IOH_Grade)
 431          {
 432   1              /* 选择需要操作的GPIO */
 433   1        switch (GPIOx)
 434   1        {
 435   2        case GPIO0:
 436   2          if (PortPins == GPIO_PIN_LNIB)
 437   2          {
 438   3            IOHCON0 &= 0xFC;
 439   3            IOHCON0 |= GPIO_IOH_Grade;
 440   3          }
 441   2          else if (PortPins == GPIO_PIN_HNIB)
 442   2          {
 443   3            IOHCON0 &= 0xF3;
 444   3            IOHCON0 |= GPIO_IOH_Grade << 2;
 445   3          }
 446   2          break;
 447   2        case GPIO1:
 448   2          if (PortPins == GPIO_PIN_LNIB)
 449   2          {
 450   3            IOHCON0 &= 0xCF;
 451   3            IOHCON0 |= GPIO_IOH_Grade << 4;
 452   3          }
 453   2          else if (PortPins == GPIO_PIN_HNIB)
 454   2          {
 455   3            IOHCON0 &= 0x3F;
 456   3            IOHCON0 |= GPIO_IOH_Grade << 6;
 457   3          }
 458   2          break;
 459   2        case GPIO2:
 460   2          if (PortPins == GPIO_PIN_LNIB)
 461   2          {
 462   3            IOHCON1 &= 0xFC;
 463   3            IOHCON1 |= GPIO_IOH_Grade;
 464   3          }
 465   2          else if (PortPins == GPIO_PIN_HNIB)
 466   2          {
 467   3            IOHCON1 &= 0xF3;
 468   3            IOHCON1 |= GPIO_IOH_Grade << 2;
 469   3          }
 470   2          break;
 471   2      #if defined(SC95F8x1x) || defined(SC95F7x1x) || defined(SC95FWxx) ||defined(SC95F8x3x) || defined(SC95F7x3
             -x) || defined (SC95F8x6x) || defined (SC95F7x6x)  || defined (SC95F8x1xB) || defined (SC95F7x1xB)
 472   2        #if !defined(SC95F7619B)
 473   2              case GPIO3:
 474   2          if (PortPins == GPIO_PIN_LNIB)
 475   2          {
 476   3            IOHCON1 &= 0xCF;
 477   3            IOHCON1 |= GPIO_IOH_Grade << 4;
 478   3          }
C51 COMPILER V9.54   SC95F_GPIO                                                            04/19/2023 15:54:52 PAGE 9   

 479   2          break;
 480   2                      #endif
 481   2      #elif defined(SC95F8x2x) || defined(SC95F7x2x)
                case GPIO5:
                  if (PortPins == GPIO_PIN_LNIB)
                  {
                    IOHCON1 &= 0xCF;
                    IOHCON1 |= GPIO_IOH_Grade << 4;
                  }
                  break;
              #endif
 490   2        default:
 491   2          break;
 492   2        }
 493   1      }
 494          
 495          /******************* (C) COPYRIGHT 2020 SinOne Microelectronics *****END OF FILE****/


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    784    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
